X = [2 6]';
Xh = [X' -1]';
W1 = [2 4; 4 0]
W1h = [2 4 -6; 4 0 -2]
W2 = [2 0 ; 2 -4 ]
W2h = [2 0 -4; 2 -4 6]
% W2h = [W2' -0.16]

d = [0.9 0.1]' 


I1 = W1h*Xh

Y1 = [1/(1+exp(-I1(1))) 1/(1+exp(-I1(2)))]'
Y1h = [Y1' -1]'

I2 = W2h*Y1h
Y2 = [1/(1+exp(-I2(1))) 1/(1+exp(-I2(2)))]'
Y2h = [Y2' -1]'




e = Y1 - d
phi_p1 = [Y1(1)*(1-Y1(1)) Y1(2)*(1-Y1(2))]' 
phi_p2 = [Y2(1)*(1-Y2(1)) Y2(2)*(1-Y2(2))]'

del2 = e.*phi_p1

del1 = W2'*del2 .* phi_p2

W2n = W2h - del2*Y1h'
W1n = W1h - del1*Xh'